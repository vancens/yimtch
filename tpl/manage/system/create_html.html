<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <title>生成html</title>
    {include file="public/source_head"}
</head>
<body>
<div class="layui-fluid">
    <blockquote class="layui-elem-quote va-head-positon">
            <span class="layui-breadcrumb">
                <a><i class="layui-icon layui-icon-home"></i> 当前位置</a>
                <a href="{:url('System/createHtml')}">生成html</a>
            </span>
        <div class="layui-btn-group">
            <a class="layui-btn layui-btn-xs layui-btn-normal" onclick="i_reload()"><i class="layui-icon layui-icon-refresh"></i> 刷新</a>
        </div>
    </blockquote>
    <form class="layui-form layui-form-pane">
        <table class="layui-table">
            <colgroup>
                <col width="10%">
                <col width="30%">
                <col>
                <col>
            </colgroup>
            <tbody>
            <tr>
                <td>首页</td>
                <td>
                    {if $is_index_html}
                    <input type="radio" name="index" value="0" title="动态" lay-filter="index_radio">
                    <input type="radio" name="index" value="1" title="静态" lay-filter="index_radio" checked>
                    {else}
                    <input type="radio" name="index" value="0" title="动态" lay-filter="index_radio" checked>
                    <input type="radio" name="index" value="1" title="静态" lay-filter="index_radio">
                    {/if}
                </td>
                <td>
                    <button class="layui-btn layui-btn-sm" lay-submit lay-filter="create_index">生成</button>
                </td>
                <td>选择动态后将删除网站根目录下的<span class="layui-badge-rim">index.html</span>文件</td>
            </tr>


            </tbody>
        </table>
    </form>
</div>
<!--js-->
{include file="public/source_bottom"}
<script>

    //监听生成首页按钮
    form.on('submit(create_index)', function(data){
        //console.log('create_index btn')
        let value = data.field.index
        let index = layer.load()
        $.get("{:url('index/Index/createIndex')}",{type:value},function (ret){
            console.log(ret)
            layer.close(index)
            layer.msg(ret.msg)
        })
        return false;
    });
    //监听生成栏目按钮
    form.on('submit(create_column)', function(data){
        //console.log('create_index btn')
        let value = data.field.column
        console.log(value)
        if (!value){
            layer.alert('请选择栏目')
            return false;
        }

        let index = layer.load()
        $.get("{:url('index/Index/createColumn')}",{lid:value},function (ret){
            console.log(ret)
            layer.close(index)
            layer.msg(ret.msg)
        })
        return false;
    });
</script>
</body>
</html>