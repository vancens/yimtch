<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <title>清理缓存</title>
    {include file="public/source_head"}
</head>
<body>
<div class="layui-fluid">
    <blockquote class="layui-elem-quote va-head-positon">
            <span class="layui-breadcrumb">
                <a><i class="layui-icon layui-icon-home"></i> 当前位置</a>
                <a href="{:url('System/clearTmp')}">清理缓存</a>
            </span>
        <div class="layui-btn-group">
            <a class="layui-btn layui-btn-xs layui-btn-normal" onclick="i_reload()"><i class="layui-icon layui-icon-refresh"></i> 刷新</a>
        </div>
    </blockquote>
    <form class="layui-form layui-form-pane">
        <table class="layui-table">
            <colgroup>
                <col width="10%">
                <col width="30%">
                <col>
            </colgroup>
            <tbody>
            <tr>
                <td>模板缓存</td>
                <td>
                    /runtime/tmp
                </td>
                <td>
                    <button class="layui-btn layui-btn-sm" lay-submit lay-filter="clear_tmp">清除</button>
                </td>
            </tr>
            <tr>
                <td>运行日志</td>
                <td>
                    /runtime/log
                </td>
                <td>
                    <button class="layui-btn layui-btn-sm" lay-submit lay-filter="clear_log">清除</button>
                </td>
            </tr>
            </tbody>
        </table>
    </form>
</div>
<!--js-->
{include file="public/source_bottom"}
<script>

    //监听
    form.on('submit(clear_tmp)', function(data){
        //console.log('create_index btn')
        //let value = data.field.index
        let index = layer.load()
        $.get("{:url('clearTmp')}",{type:'temp'},function (ret){
            console.log(ret)
            layer.close(index)
            layer.msg(ret.msg)
        })
        return false;
    });
    form.on('submit(clear_log)', function(data){
        //console.log('create_index btn')
        //let value = data.field.index
        let index = layer.load()
        $.get("{:url('clearTmp')}",{type:'log'},function (ret){
            console.log(ret)
            layer.close(index)
            layer.msg(ret.msg)
        })
        return false;
    });
</script>
</body>
</html>